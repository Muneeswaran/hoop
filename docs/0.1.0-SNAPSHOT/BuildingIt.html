<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Feb 13, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Hoop - Hoop, Hadoop HDFS over HTTP 0.1.0-SNAPSHOT - Building It</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta name="author" content="Alejandro Abdelnur" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="banner">
                  <span id="bannerLeft">
                Â 
                </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                <div class="xleft">
        Last Published: 2012-02-13
                      </div>
            <div class="xright">            <a href="../index.html">OTHER RELEASES</a>
            |
                <a href="http://www.cloudera.com/" class="externalLink">Cloudera</a>
              
                                 Version: 0.1.0-SNAPSHOT
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
          <img alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                       
                            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Hoop, Hadoop HDFS over HTTP 0.1.0-SNAPSHOT - Building It</h2>
<p>[ <a href="index.html">Go Back</a> ]</p>
<div class="section"><h3>Requirements</h3>
<ul><li>Java 6+</li>
<li>Maven 3+</li>
</ul>
</div>
<div class="section"><h3>Source location</h3>
<ul><li>GitHub URL: <a href="https://github.com/cloudera/hoop" class="externalLink">https://github.com/cloudera/hoop</a></li>
<li>Git URL: <tt>git://github.com/cloudera/hoop.git</tt></li>
</ul>
</div>
<div class="section"><h3>Building and Testing</h3>
<p>Use Maven goals: clean, test, compile, package, site, install, assembly:single</p>
</div>
<div class="section"><h3>Changing the Version of Hadoop used to Build and Test Hoop</h3>
<p>Hoop by defaul builds with Hadoop <b>cdh3u0</b>. It has been tested with both <b>cdh3u0</b> and <b>cdh3u1</b>.</p>
<p>To change the version of Hadoop used to build Hoop edit the <tt>hoop-project/pom.xml</tt> file setting the <tt>hadoop.version</tt> property to the desired Hadoop version.</p>
<p><b>IMPORTANT:</b> Hoop uses the Hadoop <tt>UserGroupInformation</tt> class and Hadoop proxy user capabilities introduced with Hadoop security. Hoop does not work with earlier versions of Hadoop.</p>
</div>
<div class="section"><h3>Testing Configuration</h3>
<p>All the properties in the <tt>test.properties</tt> file in the source root become Java System Properties during the tests.</p>
<p>The following properties control how tests are run (shown with default values):</p>
<ul><li><tt>test.hadoop.minicluster=true</tt></li>
<li><tt>test.hadoop.user.u1=g1,supergroup</tt></li>
<li><tt>test.hadoop.user.u2=g2,supergroup</tt></li>
<li><tt>test.hadoop.proxyuser=${user.name}</tt></li>
</ul>
<p>In the above properties the <tt>u1</tt> and <tt>u2</tt> are the users used from the tests. <tt>g1, g2 &amp; supergroup</tt> are the groups they belong to.</p>
<p>The Unix user running the tests is by default the proxy user for the 'doAs' tests.</p>
<p>If minicluster is set to <tt>false</tt>, the the <tt>fs.default.name</tt> property must be set to the RPC URL of the Namenode used for the testcases.</p>
</div>
<div class="section"><h3>Building a binary distribution</h3>
<p>From Hoop source root directory run:</p>
<div class="source"><pre>$ mvn clean package site assembly:single</pre>
</div>
<p>The TARBALL distribution will be at <tt>hoop-distro/target/hoop-0.1.0-SNAPSHOT.tar.gz</tt>.</p>
</div>
<div class="section"><h3>Running Clover</h3>
<div class="source"><pre>$ mvn clean install clover2:instrument clover2:aggregate clover2:clover</pre>
</div>
<p><tt>install</tt> must be run, otherwise clover does not find dependent modules JARs.</p>
<p>The Clover license location can be specified with the following option (default value shown) when invoking Maven:</p>
<div class="source"><pre>$ mvn clean install clover2:instrument clover2:aggregate clover2:clover \
  -DcloverLicenseLocation=${user.home}/.clover.license</pre>
</div>
</div>
<div class="section"><h3>Doing a Release</h3>
<div class="section"><h4>Checklist</h4>
<ul><li>README file must be updated to list the version being released as an available version</li>
<li>Update the <tt>hoop-docs/src/site/docs.html</tt> page to include a link to the docs of the version being released</li>
<li>Push the local commits to the GitHub repository</li>
</ul>
</div>
<div class="section"><h4>Update the Version, Tag the Repository, Deploy the POM/JARs to the Maven Repository</h4>
<p>Use the <tt>mvn release:prepare</tt> and <tt>mvn release:perform</tt> commands.</p>
<p>The following instructions will:</p>
<ul><li>Update the versions in POMs to the release version</li>
<li>Tag the commit with the release version</li>
<li>Update the versions in the POMs to the next development version</li>
<li>Deploy the POM/JARs to the Maven Repository</li>
</ul>
<p>For the tag name use exactly the release number (i.e. <tt>1.0.0</tt>).</p>
<p><b>IMPORTANT:</b> Write permission to the GitHub repository and to the CDH release Maven repository are required.</p>
</div>
<div class="section"><h4>Publish the Documentation</h4>
<p>Checkout the release tag and build a binary distribution.</p>
<div class="source"><pre>$ mvn clean package site assembly:single -DskipTests</pre>
</div>
<p>The generated documentation is available at <tt>hoop-distribution/target/hoop-0.1.0-SNAPSHOT/hoop-0.1.0-SNAPSHOT/docs</tt>.</p>
<p>Copy documentation directory to a temporary location.</p>
<div class="source"><pre>$ cp -r hoop-docs/target/hoop-docs/docs /tmp/hoopdocs/</pre>
</div>
<p>Checkout the <tt>gh-pages</tt> branch and clean working directory.</p>
<div class="source"><pre>$ git checkout gh-pages
$ git clean -d -f</pre>
</div>
<p>Remove <tt>docs/latest/</tt> directory and commit the removal.</p>
<div class="source"><pre>$ rm -rf docs/latest
$ git add -u
$ git commit -m &quot;cleaning latest&quot;
[gh-pages 5243411] cleaning latest
 84 files changed, 0 insertions(+), 12013 deletions(-)
 delete mode 100644 docs/latest/BuildingIt.html
 ...
 delete mode 100644 docs/latest/images/newwindow.png
 delete mode 100644 docs/latest/index.html</pre>
</div>
<p>Copy the new documentation set from the temporary location, add the new documentation files to Git and commit them.</p>
<div class="source"><pre>$ cp -r /tmp/hoopdocs/* docs/

$ git add index.html docs/*

$ git commit -m &quot;docs 0.1.0-SNAPSHOT&quot;
[gh-pages 55193ef] docs 0.1.0-SNAPSHOT
 170 files changed, 24066 insertions(+), 0 deletions(-)
 create mode 100644 docs/0.1.0-SNAPSHOT/BuildingIt.html
 ...
 create mode 100644 docs/latest/index.html</pre>
</div>
<p>Check the documentation locally by, then push the documentation to GitHub.</p>
<div class="source"><pre>$ git push origin gh-pages:gh-pages</pre>
</div>
<p>Check the site looks properly: <a href="http://cloudera.github.com/hoop" class="externalLink">Hoop GitHub site</a>.</p>
<p>[ <a href="index.html">Go Back</a> ]</p>
</div>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;            2012
              Cloudera
            
                       - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
